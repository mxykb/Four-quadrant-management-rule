# 紧急重要四象限工具 (Four Quadrant Task Manager)

一个功能完整的Android任务管理应用，基于艾森豪威尔四象限矩阵理论，帮助用户科学管理任务优先级。集成番茄钟专注工具、数据统计分析、智能提醒系统和用户中心等核心功能，采用现代化Material Design设计，提供流畅的用户体验。

## 🌟 功能特点

### 🎯 核心功能
- **四象限任务管理**：将任务按重要性和紧急性分为四个象限
- **可视化图表**：直观显示任务在四象限中的位置
- **任务管理**：动态添加、编辑、完成和删除任务
- **实时评分**：使用滑块为每个任务的重要性(1-10)和紧急性(1-10)评分
- **图片保存**：将生成的四象限图表保存为PNG图片
- **侧边栏导航**：统一的导航体验，快速切换功能模块

### 🍅 番茄钟功能
- **专业计时器**：支持25分钟工作+5分钟休息的番茄工作法
- **任务绑定**：从任务列表选择当前专注的任务
- **图标切换**：个性化计时器图标，支持多种emoji
- **计时控制**：开始、暂停、继续、放弃功能
- **状态持久化**：切换页面或后台运行时保持计时状态
- **自定义设置**：
  - 番茄钟个数配置
  - 工作时长自定义（分钟）
  - 休息时长自定义（分钟）
  - 自动进入下一个番茄钟选项
- **智能提醒**：
  - 振动提醒开关
  - 响铃提醒开关
  - 计时结束时自动提醒
- **周期管理**：自动管理工作/休息周期切换

### 📊 统计分析
- **专业图表库**：集成MPAndroidChart实现多种图表类型
- **多维度分析**：
  - 任务完成趋势线图
  - 四象限分布饼图
  - 番茄钟使用柱状图
- **KPI指标**：
  - 已完成任务数
  - 番茄钟使用次数
  - 任务完成率
  - 平均重要性评分
- **时间范围筛选**：今日、本周、本月、本年、自定义时间范围
- **任务分析**：
  - 高优先级任务列表
  - 最长耗时任务分析
  - 智能建议系统
- **交互图表**：点击图表区域查看详细信息
- **实时更新**：任务变更时自动更新统计数据

### ⏰ 定时通知系统
- **提醒管理**：
  - 提醒列表视图
  - 日历视图
  - 新建提醒功能
- **智能提醒设置**：
  - 自定义提醒内容输入
  - 快捷时间选择（5分钟、15分钟、30分钟后）
  - 精确时间选择器
  - 关联已有任务（可选）
- **多样化提醒方式**：
  - 振动提醒开关
  - 声音提醒开关
  - 重复提醒选项（5分钟后再次提醒）
- **系统级通知**：
  - 高优先级通知显示
  - 通知栏快捷操作
  - "知道了"和"稍后提醒"按钮
  - 后台精确定时执行
- **提醒状态管理**：活跃、暂停、完成状态跟踪

### 👤 用户中心
- **个人信息管理**：
  - 用户名设置
  - 邮箱信息
  - 个人简介编辑
- **使用统计**：
  - 总任务数统计
  - 已完成任务数
  - 完成率计算
  - 使用时长记录
- **数据管理**：
  - 信息本地保存
  - 一键重置功能
- **功能预览**：为未来功能扩展预留接口

### 🎨 用户界面
- **现代化设计**：使用Material Design和CardView卡片布局
- **标签页导航**：任务管理的多标签页界面
- **侧边栏菜单**：统一的功能入口和导航
- **响应式布局**：支持不同屏幕尺寸和滚动浏览
- **中文界面**：完全中文化的用户界面
- **美观控件**：自定义按钮样式、圆角阴影效果

## 📱 应用结构

### 主要功能模块
1. **任务管理** - 四象限任务管理核心功能
   - 任务列表：添加、编辑、完成、删除任务
   - 四象限图表：可视化任务分布
   - 已完成任务：查看完成历史和时间
   - 任务排序：按优先级智能排序

2. **统计** - 数据分析和可视化图表
   - 多维度KPI指标
   - 专业图表展示
   - 时间范围筛选
   - 任务分析建议

3. **番茄钟** - 专注计时和工作管理
   - 标准番茄工作法
   - 任务绑定集成
   - 自定义设置
   - 状态持久化

4. **定时通知** - 完整的提醒系统
   - 提醒列表管理
   - 日历视图
   - 新建提醒
   - 系统通知集成

5. **用户中心** - 个人信息和使用统计
   - 个人资料管理
   - 使用数据统计
   - 数据管理功能

### 技术架构
- **MVVM架构**：采用ViewModel + LiveData响应式数据绑定
- **Room数据库**：完整的数据持久化解决方案，支持复杂查询和关系映射
- **Repository模式**：统一的数据访问层，分离业务逻辑和数据操作
- **Fragment架构**：使用ViewPager2和TabLayout实现标签页导航
- **模块化设计**：功能模块独立，清晰的代码结构便于维护和扩展
- **数据管理**：StatisticsDataManager统一管理数据计算和分析

## 四象限说明

### 第一象限：紧急且重要 🔴
- 需要立即处理的任务
- 通常包括：紧急会议、截止日期临近的项目、危机处理

### 第二象限：重要不紧急 🟠
- 需要计划的重要任务
- 通常包括：长期规划、关系建立、个人发展

### 第三象限：紧急不重要 🔵
- 可以委托或简化的任务
- 通常包括：某些会议、电话、邮件

### 第四象限：不紧急不重要 ⚪
- 应该避免或最小化的任务
- 通常包括：时间浪费、某些娱乐活动

## 📖 使用方法

### 🗂️ 任务管理
#### 1. 任务列表
- **添加任务**：点击"添加任务"按钮创建新任务
- **编辑任务**：在任务卡片中修改任务名称和评分
- **完成任务**：点击完成按钮标记任务为已完成状态
- **删除任务**：点击任务卡片右上角的删除按钮
- **清空所有**：点击"清空所有"按钮删除所有活跃任务
- **实时评分**：使用滑块调整任务的重要性(1-10)和紧急性(1-10)评分
- **自动保存**：所有任务变更都会自动保存到本地存储

#### 2. 四象限图表
- **自动同步**：切换到"四象限图表"标签页时自动加载任务数据
- **查看图表**：实时显示任务在四象限中的分布
- **生成图表**：点击"生成图表"按钮更新四象限显示
- **保存图片**：点击"保存图片"按钮将图表保存为PNG文件
- **设置选项**：点击"设置"按钮调整应用参数

#### 3. 已完成任务
- **查看已完成任务**：显示所有已完成的任务列表
- **完成时间**：显示每个任务的完成时间
- **任务详情**：显示任务的重要性、紧急性评分
- **自动更新**：任务完成状态变更时自动更新列表

#### 4. 任务排序
- **优先级排序**：按四象限优先级自动排序任务
- **排序规则**：
  - 第一象限（紧急且重要）→ 第二象限（重要不紧急）→ 第三象限（紧急不重要）→ 第四象限（不紧急不重要）
  - 每个象限内按评分降序排列
- **象限标识**：清楚显示每个任务所属的象限
- **排名显示**：显示任务在优先级列表中的排名

### 🍅 番茄钟使用
#### 1. 基础操作
- **选择任务**：从下拉框选择要专注的任务
- **切换图标**：点击太阳图标选择个性化emoji
- **开始计时**：点击"开始"按钮启动25分钟倒计时
- **控制计时**：
  - **暂停**：暂停当前计时，可随时继续
  - **继续**：从暂停处恢复计时
  - **放弃**：结束当前番茄钟，重置到初始状态

#### 2. 设置配置
- **番茄钟设置**：
  - 设置番茄钟总个数
  - 自定义单个番茄钟时长（分钟）
  - 设置休息时长（分钟）
  - 开启/关闭自动进入下一个番茄钟
- **提醒设置**：
  - 振动提醒开关
  - 响铃提醒开关

#### 3. 高级功能
- **状态保持**：切换页面或后台运行时保持计时状态
- **任务同步**：任务列表更新时自动刷新番茄钟的任务选择
- **周期管理**：自动在工作时间和休息时间间切换
- **智能显示**：计时期间显示选中任务名，休息时显示"休息"

### ⏰ 定时通知使用
#### 1. 提醒管理
- **提醒列表**：查看所有设置的提醒
- **日历视图**：按日期查看提醒安排
- **新建提醒**：创建新的定时提醒

#### 2. 基础设置
- **输入提醒内容**：在文本框中输入提醒描述，如"阅读课本第六章"
- **关联任务**：从下拉菜单选择相关任务（可选）
- **设置时间**：
  - 快捷选择：点击"5分钟后"、"15分钟后"、"30分钟后"
  - 精确设置：点击"选择具体时间"打开时间选择器

#### 3. 提醒方式配置
- **振动提醒**：开启/关闭震动提醒
- **声音提醒**：开启/关闭声音提醒
- **重复提醒**：设置是否在5分钟后重复提醒

#### 4. 提醒管理
- **设置提醒**：点击"设置提醒"按钮保存并激活提醒
- **取消设置**：点击"取消"按钮清空当前设置
- **通知处理**：
  - 收到通知时点击"知道了"关闭提醒
  - 点击"稍后提醒"延迟5分钟再次提醒

### 📊 统计功能
- **查看图表**：点击侧边栏"统计"进入数据分析页面
- **时间筛选**：选择今日、本周、本月、本年或自定义时间范围
- **KPI指标**：查看关键性能指标
- **图表交互**：点击图表不同区域查看详细信息
- **实时更新**：任务变更时图表自动更新

### 👤 用户中心
#### 1. 个人信息
- **编辑资料**：填写用户名、邮箱、个人简介
- **保存信息**：点击"保存"按钮持久化个人信息
- **重置数据**：点击"重置"按钮清空所有个人信息

#### 2. 使用统计
- **查看数据**：自动显示任务统计、完成率等信息
- **实时更新**：保存个人信息后自动刷新统计数据

### ⚙️ 自定义设置
- **评分范围**：调整最大评分值(1-20)
- **图表大小**：调整图表显示高度(200-500dp)
- **设置持久化**：用户设置自动保存

## 💾 数据持久化

### 数据存储架构
- **Room数据库**：主要数据存储，支持复杂查询和关系映射
- **SharedPreferences**：用户设置和简单配置数据
- **JSON序列化**：复杂对象的序列化存储

### 数据库实体 (Entity)
- **TaskEntity**：任务数据实体，包含任务信息、优先级、完成状态等
- **PomodoroSessionEntity**：番茄钟会话记录，追踪专注时间和任务关联
- **ReminderEntity**：提醒数据实体，支持定时通知功能
- **UserEntity**：用户信息实体，存储个人资料和偏好设置
- **SettingsEntity**：应用设置实体，保存用户配置
- **TimerStateEntity**：计时器状态实体，支持状态恢复

### 数据访问层 (DAO)
- **TaskDao**：任务数据访问对象，提供CRUD操作和复杂查询
- **PomodoroDao**：番茄钟数据访问，支持统计分析查询
- **ReminderDao**：提醒数据访问，支持时间范围查询
- **UserDao**、**SettingsDao**、**TimerStateDao**：对应实体的数据访问

### 仓库层 (Repository)
- **TaskRepository**：任务数据仓库，封装数据操作逻辑
- **PomodoroRepository**：番茄钟数据仓库，提供统计数据
- **StatisticsRepository**：统计数据仓库，聚合多源数据
- **ReminderRepository**：提醒数据仓库，管理通知逻辑
- **UserRepository**：用户数据仓库，处理个人信息

### 数据管理
- **StatisticsDataManager**：统一的数据计算和管理
- **TaskRepository**：任务数据的Repository模式
- **数据迁移**：DataMigrationManager处理版本升级

### 数据安全
- **唯一ID**：每个任务和提醒分配唯一标识符，避免数据冲突
- **状态验证**：加载时验证数据完整性
- **容错处理**：异常情况下自动恢复或初始化数据
- **数据同步**：多Fragment间的实时数据同步机制

## 🛠️ 技术特点

### 架构设计
- **MVVM架构**：采用ViewModel + LiveData实现响应式数据绑定
- **Repository模式**：统一的数据访问层，分离业务逻辑和数据操作
- **Fragment架构**：使用ViewPager2和TabLayout实现标签页导航
- **模块化设计**：功能模块独立，清晰的代码结构便于维护和扩展
- **依赖注入**：手动依赖管理，确保组件间松耦合

### 核心技术
- **Room数据库**：完整的ORM解决方案，支持复杂查询和关系映射
- **LiveData + ViewModel**：响应式数据绑定和状态管理
- **自定义视图**：使用Canvas绘制四象限图表和自定义UI组件
- **MPAndroidChart**：专业图表库，支持多种图表类型和交互
- **RecyclerView**：高效的列表显示，支持复杂布局和动画
- **CountDownTimer**：精确的番茄钟计时功能，支持状态持久化
- **AlarmManager**：系统级定时任务，支持精确闹钟和后台执行
- **NotificationManager**：完整的通知系统，支持自定义操作和样式
- **权限管理**：运行时权限请求（存储、振动、通知、精确闹钟）
- **数据持久化**：Room数据库 + SharedPreferences + JSON序列化
- **生命周期管理**：Fragment生命周期感知和状态保持
- **多线程处理**：后台数据处理和UI更新分离
- **状态管理**：统一的加载状态、错误处理和数据同步机制

### 依赖库版本
- **Android Gradle Plugin**: 8.7.2
- **Compile SDK**: 34 (Android 14)
- **Target SDK**: 34
- **Min SDK**: 24 (Android 7.0)
- **Room Database**: 2.6.1
- **MPAndroidChart**: v3.1.0
- **AppCompat**: 1.7.0
- **Material Components**: 1.12.0
- **Lifecycle**: 2.8.7
- **RecyclerView**: 1.3.2

### UI/UX设计
- **Material Design**：现代化设计语言
- **CardView布局**：卡片式界面设计
- **响应式设计**：适配不同屏幕尺寸
- **自定义样式**：圆角按钮、阴影效果、背景图案
- **图标系统**：支持emoji图标和矢量图标

### 性能优化
- **内存管理**：Fragment复用和及时释放
- **状态保持**：应用后台运行时保持计时状态
- **数据同步**：Fragment间高效的数据通信
- **异常处理**：完善的错误处理和用户提示

## 📋 系统要求

- **Android版本**：Android 7.0 (API 24) 或更高版本
- **Java运行时**：JVM 11 或更高版本（开发环境）
- **权限需求**：
  - 存储权限（保存图片）
  - 振动权限（番茄钟提醒）
  - 通知权限（定时提醒）
  - 精确闹钟权限（定时提醒）
- **推荐配置**：
  - 屏幕尺寸：5.5英寸或更大
  - 内存：2GB RAM或更高

## 🔧 开发信息

- **开发语言**：Java
- **最低SDK**：API 24 (Android 7.0)
- **目标SDK**：API 34 (Android 14)
- **编译工具**：Gradle 8.x
- **架构模式**：MVC + Fragment
- **UI框架**：Android原生组件 + Material Design
- **第三方库**：
  - MPAndroidChart（专业图表库）
  - Gson（JSON序列化）
  - Room（数据库ORM）
  - AndroidX库套件
  - Lifecycle组件（ViewModel、LiveData）

## 📚 项目文档

项目包含以下重要文档，详细说明了各个功能模块的实现：

- **统计界面真实数据集成实现文档.md**：详细说明统计界面从模拟数据到真实数据的完整实现过程
- **番茄钟完成弹窗功能说明.md**：番茄钟完成弹窗的功能设计和实现细节
- **定时通知功能说明.md**：定时通知功能的设计思路和技术实现
- **Android_Fragment_State_Recovery_Solution.md**：Fragment状态恢复的解决方案

## 📦 安装说明

### 环境要求
- Android Studio Arctic Fox 或更高版本
- Android SDK 24 或更高版本 (Android 7.0+)
- Java 11 或更高版本
- Gradle 8.7.2

### 安装步骤
1. **环境准备**：确保开发环境使用Java 11或更高版本
2. **克隆项目**：`git clone [项目地址]`
3. **打开项目**：使用Android Studio打开项目
4. **同步依赖**：等待Gradle同步完成
5. **构建APK**：运行`./gradlew assembleDebug`
6. **安装应用**：
   - 在Android设备上启用"未知来源"应用安装
   - 安装生成的APK文件
   - 授予必要权限（存储、振动、通知）
7. **开始使用**：享受完整的四象限工具体验

## 📝 更新日志

### v3.0 (当前版本)
#### 🗄️ 数据架构全面升级
- **真实数据集成**：
  - 统计界面从模拟数据切换到真实数据
  - 新增PomodoroRecord番茄钟记录系统
  - StatisticsDataManager统一数据管理
  - 完善的数据持久化机制
- **ViewModel状态管理**：
  - 引入MVVM架构模式
  - LiveData响应式数据绑定
  - 统一的加载状态管理
  - 下拉刷新功能集成

#### ⏰ 定时通知系统完善
- **完整提醒管理**：
  - 提醒列表视图和日历视图
  - 新建/编辑提醒功能
  - 提醒状态管理（活跃/暂停/完成）
- **系统通知集成**：
  - 高优先级通知显示
  - 通知栏快捷操作（知道了/稍后提醒）
  - 后台精确定时执行
  - 多媒体提醒（振动+声音）
- **紫色主题设计**：
  - 参考Forest和Pomofocus的简洁风格
  - Material Design卡片式布局
  - 响应式移动端适配

#### 📊 统计功能大幅增强
- **专业图表库**：集成MPAndroidChart
- **真实数据分析**：
  - 任务完成趋势线图（基于真实完成数据）
  - 四象限分布饼图（实时任务分布）
  - 番茄钟使用柱状图（按时间段统计）
- **KPI指标系统**：
  - 今日完成任务数
  - 本周番茄钟使用次数
  - 本周任务完成率
  - 平均重要性评分
- **时间范围筛选**：今日、本周、本月、本年、自定义时间
- **任务分析建议**：
  - 高优先级任务识别
  - 最长耗时任务分析
  - 智能建议系统

#### 🔧 系统架构优化
- **数据库集成**：Room数据库支持
- **Fragment管理**：改进的页面状态管理
- **数据同步**：增强的Fragment间通信
- **状态持久化**：完善的提醒和设置保存
- **错误处理**：增强的异常处理机制
- **权限管理**：完善的运行时权限处理

### v2.1
#### ⏰ 定时通知系统基础版
- 基础提醒功能实现
- 系统通知集成
- 提醒设置选项

#### 📊 统计功能初版
- MPAndroidChart图表库集成
- 模拟数据展示
- 基础KPI指标

### v2.0
#### 🍅 番茄钟功能
- **全功能番茄钟**：25分钟工作+5分钟休息标准流程
- **任务绑定**：与任务管理系统完全集成
- **个性化设置**：
  - 自定义工作/休息时长
  - 番茄钟个数配置
  - 自动进入下一轮选项
- **智能提醒**：振动+响铃可选提醒
- **状态持久化**：后台运行和页面切换时保持计时状态
- **图标切换**：支持emoji个性化图标
- **计时控制**：开始/暂停/继续/放弃完整控制

#### 👤 用户中心重构
- **独立页面**：从弹窗改为独立的全屏页面
- **个人信息管理**：用户名、邮箱、个人简介
- **使用统计**：任务数据、完成率实时统计
- **数据管理**：信息保存和重置功能
- **美观界面**：卡片式布局，现代化设计

#### 📊 统计功能增强
- **专业图表**：集成MPAndroidChart图表库
- **交互式饼图**：点击查看详细信息
- **独立页面**：从弹窗改为专业的数据分析页面
- **实时更新**：任务变更时自动刷新图表

#### 🔧 系统改进
- **数据持久化优化**：修复已完成任务消失问题
- **任务ID系统**：唯一标识符避免数据冲突
- **Fragment通信**：改进多Fragment间数据同步
- **状态管理**：完善的生命周期管理
- **错误处理**：增强异常处理和用户提示
#### 🍅 番茄钟功能
- **全功能番茄钟**：25分钟工作+5分钟休息标准流程
- **任务绑定**：与任务管理系统完全集成
- **个性化设置**：
  - 自定义工作/休息时长
  - 番茄钟个数配置
  - 自动进入下一轮选项
- **智能提醒**：振动+响铃可选提醒
- **状态持久化**：后台运行和页面切换时保持计时状态
- **图标切换**：支持emoji个性化图标
- **计时控制**：开始/暂停/继续/放弃完整控制

#### 👤 用户中心重构
- **独立页面**：从弹窗改为独立的全屏页面
- **个人信息管理**：用户名、邮箱、个人简介
- **使用统计**：任务数据、完成率实时统计
- **数据管理**：信息保存和重置功能
- **美观界面**：卡片式布局，现代化设计

#### 📊 统计功能增强
- **专业图表**：集成MPAndroidChart图表库
- **交互式饼图**：点击查看详细信息
- **独立页面**：从弹窗改为专业的数据分析页面
- **实时更新**：任务变更时自动刷新图表

#### 🔧 系统改进
- **数据持久化优化**：修复已完成任务消失问题
- **任务ID系统**：唯一标识符避免数据冲突
- **Fragment通信**：改进多Fragment间数据同步
- **状态管理**：完善的生命周期管理
- **错误处理**：增强异常处理和用户提示

### v1.5
- 添加侧边栏导航功能
- 集成任务管理、统计、用户三个主要功能模块
- 优化工具栏和导航体验
- 支持汉堡菜单按钮打开/关闭侧边栏
- 改进整体UI布局和交互设计
- 实现统计和用户功能的基础界面

### v1.4
- 修复任务完成后不消失的问题
- 使用唯一ID标识任务，避免同名任务冲突
- 改进任务数据管理，分离活跃任务和已完成任务
- 优化任务状态持久化机制

### v1.3
- 添加任务完成功能
- 新增已完成任务标签页，显示完成时间
- 新增任务排序标签页，按四象限优先级排序
- 扩展为4个标签页界面

### v1.2
- 修复标签页切换时任务数据同步问题
- 改进四象限图表的自动更新机制
- 优化用户体验，减少手动操作

### v1.1
- 添加任务持久化功能
- 移除示例任务
- 添加清空所有任务功能
- 自动保存任务变更

### v1.0
- 初始版本发布
- 基本四象限功能
- 任务评分和图表生成
- 图片保存功能

## 🚀 未来规划

### 即将推出的功能
- **数据备份**：云端同步和本地备份
- **数据导出**：Excel/CSV格式导出
- **主题切换**：深色模式和多主题支持
- **统计增强**：更多维度的数据分析
- **团队协作**：多用户任务共享

### 长期规划
- **日历集成**：与系统日历同步
- **智能推荐**：AI驱动的任务优先级建议
- **桌面小组件**：快速查看和操作
- **语音输入**：语音创建任务和提醒

---

## ⚠️ 重要说明

**隐私保护**：此应用仅使用本地存储，不会收集、上传或分享任何用户数据。所有个人信息和任务数据都安全存储在您的设备上。

**权限说明**：
- **存储权限**：仅用于保存四象限图表图片
- **振动权限**：仅用于番茄钟计时结束提醒
- **通知权限**：仅用于定时提醒功能
- **精确闹钟权限**：仅用于定时提醒的精确定时

**技术支持**：如遇问题或有建议，欢迎通过Issue反馈。

---

## 🎯 项目特色

这个项目展现了现代Android应用开发的多个重要方面：

1. **完整的任务管理系统**：从基础的四象限理论到实用的任务管理工具
2. **MVVM架构实践**：ViewModel + LiveData响应式编程，展现现代Android架构
3. **真实数据驱动**：从模拟数据到真实数据的完整统计分析系统
4. **专业的图表分析**：集成MPAndroidChart，提供多维度数据可视化
5. **专注工具集成**：番茄钟工作法与任务管理完美结合，包含完整记录系统
6. **智能提醒系统**：完整的定时提醒功能，支持多种提醒方式和紫色主题设计
7. **现代化UI设计**：Material Design原则，卡片式布局，响应式设计
8. **数据持久化**：Room数据库 + SharedPreferences混合存储架构
9. **模块化架构**：Fragment + Repository + ViewModel清晰分层
10. **状态管理**：完善的加载状态、错误处理和数据同步机制

这是一个功能完整、架构先进、技术栈现代化的Android应用，完美展现了从传统开发到现代Android架构的演进过程，适合作为学习Android开发最佳实践的参考项目。